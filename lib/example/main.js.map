{"version":3,"sources":["../../example/main.es6"],"names":["NUMBER_OF_LEVEL_TO_GO_BACK_PROMISE_PATTERN","wrapper","func","call","err","Errors","staticIsAnError","String","stack","getFunctionName","shortcutStackTraceSpecial","b","a","unexpectedError","variable","access","nested","process","on","reason","displayColoredError","declareCodes","E7000","E8000","E9000","console","log","e","exampleFunction"],"mappings":";;;;AAAA;;AAEA,IAAMA,0CAA0C,GAAG,CAAnD;AAEA;;;;AAGA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACrB,MAAI;AACF,WAAOA,IAAI,CAACC,IAAL,EAAP;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,UAAM,CAACC,mBAAOC,eAAP,CAAuBF,GAAvB,CAAD,GACJ,IAAIC,kBAAJ,CAAW,aAAX,EAA0BE,MAAM,CAAEH,GAAG,IAAIA,GAAG,CAACI,KAAZ,IAAsBJ,GAAvB,CAAhC,EAA6DC,mBAAOI,eAAP,EAA7D,CADI,GAEJJ,mBAAOK,yBAAP,CAAiCN,GAAjC,EAAsCC,mBAAOI,eAAP,CAAuBT,0CAAvB,CAAtC,CAFF;AAGD;AACF;AAED;;;;;AAIA,SAASW,CAAT,GAAa;AACX,QAAM,IAAIN,kBAAJ,CAAW,OAAX,CAAN;AACD;;AAED,SAASO,CAAT,GAAa;AACXX,EAAAA,OAAO,CAACU,CAAD,CAAP;AACD;;AAED,SAASE,eAAT,GAA2B;AACzB,MAAMC,QAAQ,GAAG,MAAjB;AAEAA,EAAAA,QAAQ,CAACC,MAAT,CAAgBC,MAAhB,GAAyB,CAAzB;AACD,C,CAED;;AAEA;;;;;AAIAC,OAAO,CAACC,EAAR,CAAW,oBAAX,EAAiC,UAACC,MAAD,EAAY;AAC3C,MAAMf,GAAG,GAAG,IAAIC,kBAAJ,CAAW,eAAX,YAA+BE,MAAM,CAACY,MAAD,CAArC,EAAZ;AAEAf,EAAAA,GAAG,CAACgB,mBAAJ;AACD,CAJD;AAMAH,OAAO,CAACC,EAAR,CAAW,mBAAX,EAAgC,UAACC,MAAD,EAAY;AAC1C,MAAMf,GAAG,GAAG,IAAIC,kBAAJ,CAAW,eAAX,YAA+BE,MAAM,CAACY,MAAD,CAArC,EAAZ;AAEAf,EAAAA,GAAG,CAACgB,mBAAJ;AACD,CAJD,E,CAMA;;AAEA;;;;AAIAf,mBAAOgB,YAAP,CAAoB;AAClBC,EAAAA,KAAK,EAAE,cADW;AAElBC,EAAAA,KAAK,EAAE,kBAFW;AAGlBC,EAAAA,KAAK,EAAE;AAHW,CAApB;AAMA;;;AAIA;;;AAEAC,OAAO,CAACC,GAAR,CAAY,kCAAZ;;AAEA,IAAI;AACF,QAAM,IAAIrB,kBAAJ,CAAW,OAAX,CAAN;AACD,CAFD,CAEE,OAAOsB,CAAP,EAAU;AACVA,EAAAA,CAAC,CAACP,mBAAF;AACD,C,CAED;;;AAEAK,OAAO,CAACC,GAAR,CAAY,yDAAZ;;AAEA,IAAI;AACFzB,EAAAA,OAAO,CAACU,CAAD,CAAP;AACD,CAFD,CAEE,OAAOgB,CAAP,EAAU;AACVA,EAAAA,CAAC,CAACP,mBAAF;AACD,C,CAGD;;;AAEAK,OAAO,CAACC,GAAR,CAAY,6DAAZ;;AAEA,IAAI;AACFzB,EAAAA,OAAO,CAACW,CAAD,CAAP;AACD,CAFD,CAEE,OAAOe,CAAP,EAAU;AACVA,EAAAA,CAAC,CAACP,mBAAF;AACD,C,CAED;;;AAEAK,OAAO,CAACC,GAAR,CAAY,6DAAZ;;AAEA,SAASE,eAAT,GAA2B;AACzB,MAAI;AACF3B,IAAAA,OAAO,CAACW,CAAD,CAAP;AACD,GAFD,CAEE,OAAOe,CAAP,EAAU;AACVA,IAAAA,CAAC,CAACP,mBAAF;AACD;AACF;;AAEDK,OAAO,CAACC,GAAR,CAAY,sCAAZ;;AAEA,IAAI;AACFzB,EAAAA,OAAO,CAACY,eAAD,CAAP;AACD,CAFD,CAEE,OAAOc,CAAP,EAAU;AACVA,EAAAA,CAAC,CAACP,mBAAF;AACD;;AAEDK,OAAO,CAACC,GAAR,CAAY,wCAAZ;AAEAzB,OAAO,CAACY,eAAD,CAAP","sourcesContent":["import Errors from '../src/Errors.js';\n\nconst NUMBER_OF_LEVEL_TO_GO_BACK_PROMISE_PATTERN = 3;\n\n/**\n * We wrap the function call to add a stack trace to the error\n */\nfunction wrapper(func) {\n  try {\n    return func.call();\n  } catch (err) {\n    throw !Errors.staticIsAnError(err) ?\n      new Errors('EUNEXPECTED', String((err && err.stack) || err), Errors.getFunctionName()) :\n      Errors.shortcutStackTraceSpecial(err, Errors.getFunctionName(NUMBER_OF_LEVEL_TO_GO_BACK_PROMISE_PATTERN));\n  }\n}\n\n/**\n * Functions we need to generate the error case\n */\n\nfunction b() {\n  throw new Errors('E8000');\n}\n\nfunction a() {\n  wrapper(b);\n}\n\nfunction unexpectedError() {\n  const variable = 'toto';\n\n  variable.access.nested = 5;\n}\n\n// -----\n\n/**\n * Catch process exception and rejection\n */\n\nprocess.on('unhandledRejection', (reason) => {\n  const err = new Errors('GENERAL_CATCH', `${String(reason)}`);\n\n  err.displayColoredError();\n});\n\nprocess.on('uncaughtException', (reason) => {\n  const err = new Errors('GENERAL_CATCH', `${String(reason)}`);\n\n  err.displayColoredError();\n});\n\n// -----\n\n/**\n * Declare the errors\n */\n\nErrors.declareCodes({\n  E7000: 'Unknown user',\n  E8000: 'Unknown material',\n  E9000: 'API error',\n});\n\n/**\n * Launch the errors cases\n */\n\n// Display the basic error\n\nconsole.log('\\n\\n> #1 Display a basic error\\n');\n\ntry {\n  throw new Errors('E7000');\n} catch (e) {\n  e.displayColoredError();\n}\n\n// Display an error throw in a inner function\n\nconsole.log('\\n\\n> #2 Display an error thrown in an inner function\\n');\n\ntry {\n  wrapper(b);\n} catch (e) {\n  e.displayColoredError();\n}\n\n\n// Display an error throw in a inner function * 2\n\nconsole.log('\\n\\n> #3 Display an error thrown in an inner function * 2\\n');\n\ntry {\n  wrapper(a);\n} catch (e) {\n  e.displayColoredError();\n}\n\n// Display an error throw in a inner function * 2 inside of a named function\n\nconsole.log('\\n\\n> #4 Display an error thrown in an inner function * 2\\n');\n\nfunction exampleFunction() {\n  try {\n    wrapper(a);\n  } catch (e) {\n    e.displayColoredError();\n  }\n}\n\nconsole.log('\\n\\n> #5 Catch an unexpected error\\n');\n\ntry {\n  wrapper(unexpectedError);\n} catch (e) {\n  e.displayColoredError();\n}\n\nconsole.log('\\n\\n> #5 Catch an error at top level\\n');\n\nwrapper(unexpectedError);\n"],"file":"main.js"}