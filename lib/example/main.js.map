{"version":3,"sources":["../../example/main.es6"],"names":["NUMBER_OF_LEVEL_TO_GO_BACK_PROMISE_PATTERN","wrapper","func","call","err","Errors","staticIsAnError","String","stack","getFunctionName","shortcutStackTraceSpecial","b","a","unexpectedError","variable","access","nested","process","on","reason","displayColoredError","console","log","e","exampleFunction"],"mappings":";;AAAA;;;;;;AAEA,IAAMA,6CAA6C,CAAnD;;AAEA;;;AAGA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACrB,MAAI;AACF,WAAOA,KAAKC,IAAL,EAAP;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,UAAM,CAACC,iBAAOC,eAAP,CAAuBF,GAAvB,CAAD,GACJ,IAAIC,gBAAJ,CAAW,aAAX,EAA0BE,OAAQH,OAAOA,IAAII,KAAZ,IAAsBJ,GAA7B,CAA1B,EAA6DC,iBAAOI,eAAP,EAA7D,CADI,GAEJJ,iBAAOK,yBAAP,CAAiCN,GAAjC,EAAsCC,iBAAOI,eAAP,CAAuBT,0CAAvB,CAAtC,CAFF;AAGD;AACF;;AAED,SAASW,CAAT,GAAa;AACX,QAAM,IAAIN,gBAAJ,CAAW,OAAX,CAAN;AACD;;AAED,SAASO,CAAT,GAAa;AACXX,UAAQU,CAAR;AACD;;AAED,SAASE,eAAT,GAA2B;AACzB,MAAMC,WAAW,MAAjB;;AAEAA,WAASC,MAAT,CAAgBC,MAAhB,GAAyB,CAAzB;AACD;;AAEDC,QAAQC,EAAR,CAAW,oBAAX,EAAiC,UAACC,MAAD,EAAY;AAC3C,MAAMf,MAAM,IAAIC,gBAAJ,CAAW,eAAX,OAA+BE,OAAOY,MAAP,CAA/B,CAAZ;;AAEAf,MAAIgB,mBAAJ;AACD,CAJD;;AAMAH,QAAQC,EAAR,CAAW,mBAAX,EAAgC,UAACC,MAAD,EAAY;AAC1C,MAAMf,MAAM,IAAIC,gBAAJ,CAAW,eAAX,OAA+BE,OAAOY,MAAP,CAA/B,CAAZ;;AAEAf,MAAIgB,mBAAJ;AACD,CAJD;;AAMA;;AAEAC,QAAQC,GAAR,CAAY,kCAAZ;;AAEA,IAAI;AACF,QAAM,IAAIjB,gBAAJ,CAAW,OAAX,CAAN;AACD,CAFD,CAEE,OAAOkB,CAAP,EAAU;AACVA,IAAEH,mBAAF;AACD;;AAED;;AAEAC,QAAQC,GAAR,CAAY,yDAAZ;;AAEA,IAAI;AACFrB,UAAQU,CAAR;AACD,CAFD,CAEE,OAAOY,CAAP,EAAU;AACVA,IAAEH,mBAAF;AACD;;AAGD;;AAEAC,QAAQC,GAAR,CAAY,6DAAZ;;AAEA,IAAI;AACFrB,UAAQW,CAAR;AACD,CAFD,CAEE,OAAOW,CAAP,EAAU;AACVA,IAAEH,mBAAF;AACD;;AAED;;AAEAC,QAAQC,GAAR,CAAY,6DAAZ;;AAEA,SAASE,eAAT,GAA2B;AACzB,MAAI;AACFvB,YAAQW,CAAR;AACD,GAFD,CAEE,OAAOW,CAAP,EAAU;AACVA,MAAEH,mBAAF;AACD;AACF;;AAEDC,QAAQC,GAAR,CAAY,sCAAZ;;AAEA,IAAI;AACFrB,UAAQY,eAAR;AACD,CAFD,CAEE,OAAOU,CAAP,EAAU;AACVA,IAAEH,mBAAF;AACD;;AAEDC,QAAQC,GAAR,CAAY,wCAAZ;;AAEArB,QAAQY,eAAR","file":"main.js","sourcesContent":["import Errors from '../src/Errors.js';\n\nconst NUMBER_OF_LEVEL_TO_GO_BACK_PROMISE_PATTERN = 3;\n\n/**\n * We wrap the function call to add a stack trace to the error\n */\nfunction wrapper(func) {\n  try {\n    return func.call();\n  } catch (err) {\n    throw !Errors.staticIsAnError(err) ?\n      new Errors('EUNEXPECTED', String((err && err.stack) || err), Errors.getFunctionName()) :\n      Errors.shortcutStackTraceSpecial(err, Errors.getFunctionName(NUMBER_OF_LEVEL_TO_GO_BACK_PROMISE_PATTERN));\n  }\n}\n\nfunction b() {\n  throw new Errors('E0001');\n}\n\nfunction a() {\n  wrapper(b);\n}\n\nfunction unexpectedError() {\n  const variable = 'toto';\n\n  variable.access.nested = 5;\n}\n\nprocess.on('unhandledRejection', (reason) => {\n  const err = new Errors('GENERAL_CATCH', `${String(reason)}`);\n\n  err.displayColoredError();\n});\n\nprocess.on('uncaughtException', (reason) => {\n  const err = new Errors('GENERAL_CATCH', `${String(reason)}`);\n\n  err.displayColoredError();\n});\n\n// Display the basic error\n\nconsole.log('\\n\\n> #1 Display a basic error\\n');\n\ntry {\n  throw new Errors('E0001');\n} catch (e) {\n  e.displayColoredError();\n}\n\n// Display an error throw in a inner function\n\nconsole.log('\\n\\n> #2 Display an error thrown in an inner function\\n');\n\ntry {\n  wrapper(b);\n} catch (e) {\n  e.displayColoredError();\n}\n\n\n// Display an error throw in a inner function * 2\n\nconsole.log('\\n\\n> #3 Display an error thrown in an inner function * 2\\n');\n\ntry {\n  wrapper(a);\n} catch (e) {\n  e.displayColoredError();\n}\n\n// Display an error throw in a inner function * 2 inside of a named function\n\nconsole.log('\\n\\n> #4 Display an error thrown in an inner function * 2\\n');\n\nfunction exampleFunction() {\n  try {\n    wrapper(a);\n  } catch (e) {\n    e.displayColoredError();\n  }\n}\n\nconsole.log('\\n\\n> #5 Catch an unexpected error\\n');\n\ntry {\n  wrapper(unexpectedError);\n} catch (e) {\n  e.displayColoredError();\n}\n\nconsole.log('\\n\\n> #5 Catch an error at top level\\n');\n\nwrapper(unexpectedError);\n"]}